import{_ as e}from"./HomeHeader.50260d0b.js";import{p as t,b as n,r as a,o,c as l,f as i,a as s,t as r,F as u,w as m,A as d,d as c,g as f,v as p,h,e as g,K as y}from"./vendor.0be631b2.js";import{u as v,_ as x}from"./index.c97ee545.js";var b={name:"MenuItem",props:{menus:{default:()=>[]}},components:{},data:()=>({}),computed:{},mounted(){},methods:{}};const I=m();t("data-v-59ab9cdc");const w={slot:"title"},_={slot:"title"};n();const k=I(((e,t,n,m,d,c)=>{const f=a("MenuItem",!0),p=a("el-submenu"),h=a("el-menu-item");return o(!0),l(u,null,i(n.menus,(e=>(o(),l("div",{key:e.id},[e.subs?(o(),l(p,{key:0,index:e.index},{title:I((()=>[s("i",{class:e.icon||"fa fa-folder"},null,2),s("span",w,r(e.menuName),1)])),default:I((()=>[s(f,{menus:e.subs},null,8,["menus"])])),_:2},1032,["index"])):(o(),l(h,{key:1,index:e.index},{default:I((()=>[s("i",{class:e.icon||"fa fa-folder"},null,2),s("span",_,r(e.menuName),1)])),_:2},1032,["index"]))])))),128)}));b.render=k,b.__scopeId="data-v-59ab9cdc";var N={components:{menuItem:b},data:()=>({items:[],currentTap:"",isExpend:!0,menuWith:200}),computed:{menuStyle(){return{width:this.isExpend?(this.menuWith||200)+"px":"64px"}}},setup(){const e=v();return{currentAppId:d((()=>e.state.application.currentAppId))}},mounted(){let e=localStorage.getItem("currentAppId");var t=JSON.parse(localStorage.getItem(e));this.items=t},methods:{selectMenu(e){var t=this._getMenuInfoByIndex(e,this.items);this.$emit("menuclick",e,t)},_getMenuInfoByIndex(e,t){var n="",a="",o=!0,l="",i=!1,s="",r=function(e,t){for(var u=0;u<t.length;u++){var m=t[u];if(m.subs)i||(n=m.icon,a=m.menuName,r(e,m.subs));else if(e===m.index)return s=m.id,i=!0,n=m.icon,a=m.menuName,l=m.attributes.URL,void(o=!1!==m.closable)}};return r(e,t),{icon:n,menuName:a,closable:o,link:l||"",id:s}}}};const S={style:{height:"100%"},class:"jas-flex-box is-vertical menuwrapper"},M={class:"fa fa-angle-left","aria-hidden":"true"},F={class:"fa fa-angle-right","aria-hidden":"true"};N.render=function(e,t,n,i,r,u){const m=a("menuItem"),d=a("el-menu"),h=a("el-scrollbar");return o(),l("div",S,[s("div",{class:"is-grown menusubwrap",style:u.menuStyle,ref:"menubar"},[s(h,{"wrap-style":{height:"calc( 100% + 17px )"},"view-style":{height:"calc ( 100% + 17% )"},style:{height:"100%"}},{default:c((()=>[s(d,{"unique-opened":"","default-active":r.currentTap,class:"el-menu-vertical-demo",onSelect:u.selectMenu,collapse:!r.isExpend},{default:c((()=>[s(m,{menus:r.items},null,8,["menus"])])),_:1},8,["default-active","onSelect","collapse"])])),_:1},8,["wrap-style","view-style"])],4),s("div",{class:"switchwrapper",onClick:t[1]||(t[1]=e=>r.isExpend=!r.isExpend)},[f(s("i",M,null,512),[[p,r.isExpend]]),f(s("i",F,null,512),[[p,!r.isExpend]])])])};const C={name:"MainHeader",props:{menuName:{type:String,default:""},isFull:{default:!1}},data:()=>({}),created(){},mounted(){},methods:{}},H={class:"MainHeader"},E={class:"jas_box_1"},j=s("span",{class:"fa fa-angle-double-right"},null,-1),q={key:0,class:"fullpage"};C.render=function(e,t,n,a,i,u){return o(),l("div",H,[s("div",E,[j,h(" "+r(n.menuName),1)]),n.isFull?(o(),l("div",q,"全屏")):g("",!0)])};var J={name:"createForm",data:()=>({}),created(){},mounted(){},methods:{addMenu(){const e=(new Date).getTime();let t={id:"id"+e,menuCode:"F"+e,menuName:"未命名菜单",index:"pri"+e,icon:"",attributes:{URL:"",param:{}}};localStorage.setItem("menuInfo",JSON.stringify(t)),this.$router.push({path:"/indexDiy/form",query:{id:t.id}})}}};const $={class:"createForm"},A=s("div",{class:"form_icon"},null,-1),B=s("div",{style:{"text-align":"center",hegiht:"3.7vh","line-height":"3.7vh","font-size":"1.6vh"}},"新建表单",-1);J.render=function(e,t,n,a,i,r){return o(),l("div",$,[s("div",{class:"formBox",onClick:t[1]||(t[1]=(...e)=>r.addMenu&&r.addMenu(...e))},[A,B])])};const O={name:"ShowForm",props:{value:{},isdialog:{default:!0},id:{}},watch:{id(){this.get()}},components:{JasFormItem:x},computed:{},data:()=>({form:{},formitems:[],formform:{}}),created(){},methods:{clickbtn(e){"back"==e.id&&(this.visible=!1),this.$emit("clickbtn",e)},get(){if(this.id&&localStorage.getItem(this.id)){let e=JSON.parse(localStorage.getItem(this.id)||{});this.formitems=e.formitems,this.formform=e.formform}},colNum(e){return e.widthRate?24*e.widthRate:"moduletitle"==e.type||"grouptitle"==e.type?24:24/this.formform.col}}},R={style:{padding:"3vh",overflow:"auto"}},D=s("div",{slot:"test"},"这是测试自定义插槽的功能",-1),T={key:0,slot:"footer",class:"dialog-footer"};O.render=function(e,t,n,m,d,f){const p=a("JasFormItem"),y=a("el-col"),v=a("el-row"),x=a("el-form"),b=a("el-button");return o(),l(u,null,[s("div",R,[s(x,{model:d.form,"label-position":"right","label-width":"100px",style:{overflow:"hidden"}},{default:c((()=>[s(v,{gutter:20},{default:c((()=>[(o(!0),l(u,null,i(d.formitems,(e=>(o(),l(y,{key:e.field,xs:f.colNum(e),sm:f.colNum(e),md:f.colNum(e),lg:f.colNum(e),xl:f.colNum(e)},{default:c((()=>[s(p,{onBtnclick:f.clickbtn,formconfigValue:d.form,form:d.form,config:e},{default:c((()=>[D])),_:2},1032,["onBtnclick","formconfigValue","form","config"])])),_:2},1032,["xs","sm","md","lg","xl"])))),128))])),_:1})])),_:1},8,["model"])]),d.formform.buttonNames?(o(),l("div",T,[(o(!0),l(u,null,i(d.formform.buttonNames.split("、"),(n=>(o(),l(b,{type:"取消"==n?"":"primary",size:"small",key:n,onClick:t[1]||(t[1]=t=>e.visible=!1)},{default:c((()=>[h(r(n),1)])),_:2},1032,["type"])))),128))])):g("",!0)],64)};var z={name:"dashboard",components:{HomeHeader:e,Menu:N,MainHeader:C,CreateForm:J,ShowForm:O},data:()=>({menuName:"",currentComponent:"ShowForm",formId:""}),created(){this.currentComponent=this.$route.query.type},watch:{$route(e,t){e.query.type&&(this.currentComponent=e.query.type)}},mounted(){},methods:{clickMenu(e,t){if(this.menuName=t.menuName,localStorage.setItem("menuInfo",JSON.stringify(t)),"CreateForm"==this.currentComponent&&this.$router.push({path:"/indexDiy/form",query:{id:t.id}}),"ShowForm"==this.currentComponent){let e=t.id,n=localStorage.getItem("currentAppId");this.formId=n+"-"+e}}}};z.render=function(e,t,n,i,r,u){const m=a("HomeHeader"),d=a("el-header"),f=a("Menu"),p=a("el-aside"),h=a("el-container"),g=a("el-main");return o(),l(h,{style:{height:"100%"}},{default:c((()=>[s(d,{style:{padding:"0px",height:"auto"}},{default:c((()=>[s(m,{type:r.currentComponent},null,8,["type"])])),_:1}),s(h,{style:{height:"0%"}},{default:c((()=>[s(p,{id:"aside",style:{"background-color":"#fff",width:"auto"}},{default:c((()=>[s(f,{onMenuclick:u.clickMenu},null,8,["onMenuclick"])])),_:1}),s(g,{style:{padding:"0px"}},{default:c((()=>[s(h,{style:{height:"100%"},class:"jas-flex-box is-vertical"},{default:c((()=>[(o(),l(y(r.currentComponent),{id:r.formId},null,8,["id"]))])),_:1})])),_:1})])),_:1})])),_:1})};export default z;
//# sourceMappingURL=index.8d3c8775.js.map
